{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","http","obterNegociacoesDaSemana","get","then","negociacoes","map","objeto","Date","data","quantidade","valor","catch","error","Error","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","obterNegociacoesDoPerildo","Promise","all","semanasList","reduce","t","a","sort","b","getTime","err","console","log"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAGF,kBAAMC,iBAAN,CAAwB;;AAE3BC,8BAAc;AACV,yBAAKC,IAAL,GAAY,IAAIJ,WAAJ,EAAZ;AACH;;AAEDK,2CAA2B;AACvB,2BAAO,IAAIL,WAAJ,GACFM,GADE,CACE,oBADF,EAEFC,IAFE,CAEGC,eAAeA,YAChBC,GADgB,CACZC,UAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADE,CAFlB,EAKFC,KALE,CAKIC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN;AAA0D,qBALzE,CAAP;AAMH;;AAEDC,mDAAmC;AAC/B,2BAAO,IAAIlB,WAAJ,GACFM,GADE,CACE,sBADF,EAEFC,IAFE,CAEGC,eAAeA,YAChBC,GADgB,CACZC,UAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADE,CAFlB,EAKFC,KALE,CAKIC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AAA6E,qBAL5F,CAAP;AAMH;;AAGDE,oDAAoC;AAChC,2BAAO,IAAInB,WAAJ,GACFM,GADE,CACE,uBADF,EAEFC,IAFE,CAEGC,eAAeA,YAChBC,GADgB,CACZC,UAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADE,CAFlB,EAKFC,KALE,CAKIC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,2DAAV,CAAN;AAA8E,qBAL7F,CAAP;AAMH;;AAGDG,4CAA4B;AACxB,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKjB,wBAAL,EADe,EAEf,KAAKa,gCAAL,EAFe,EAGf,KAAKC,iCAAL,EAHe,CAAZ,EAKFZ,IALE,CAKGgB,eAAeA,YAChBC,MADgB,CACT,CAACC,CAAD,EAAIC,CAAJ,KAAU,CAAC,GAAGD,CAAJ,EAAO,GAAGC,CAAV,CADD,EACe,EADf,EAEhBC,IAFgB,CAEX,CAACD,CAAD,EAAIE,CAAJ,KAAUF,EAAEd,IAAF,CAAOiB,OAAP,KAAmBD,EAAEhB,IAAF,CAAOiB,OAAP,EAFlB,CALlB,EASFd,KATE,CASIe,OAAO;AACVC,gCAAQC,GAAR,CAAYF,GAAZ;AACA,8BAAM,IAAIb,KAAJ,CAAU,kDAAV,CAAN;AACH,qBAZE,CAAP;AAaH;;AAjD0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negociacao } from './Negociacao.js';\n\n\nexport class NegociacaoService {\n\n    constructor() {\n        this.http = new HttpService();\n    }\n\n    obterNegociacoesDaSemana() {\n        return new HttpService()\n            .get('negociacoes/semana')\n            .then(negociacoes => negociacoes\n                .map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n            )\n            .catch(error => { throw new Error('Não foi possível obter as negociações') });\n    }\n\n    obterNegociacoesDaSemanaAnterior() {\n        return new HttpService()\n            .get('negociacoes/anterior')\n            .then(negociacoes => negociacoes\n                .map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n            )\n            .catch(error => { throw new Error('Não foi possível obter as negociações da semana anterior') });\n    }\n\n\n    obterNegociacoesDaSemanaRetrasada() {\n        return new HttpService()\n            .get('negociacoes/retrasada')\n            .then(negociacoes => negociacoes\n                .map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n            )\n            .catch(error => { throw new Error('Não foi possível obter as negociações da semana retrasada') });\n    }\n\n\n    obterNegociacoesDoPerildo() {\n        return Promise.all([\n            this.obterNegociacoesDaSemana(),\n            this.obterNegociacoesDaSemanaAnterior(),\n            this.obterNegociacoesDaSemanaRetrasada(),\n        ])\n            .then(semanasList => semanasList\n                .reduce((t, a) => [...t, ...a], [])\n                .sort((a, b) => a.data.getTime() - b.data.getTime())\n            )\n            .catch(err => {\n                console.log(err);\n                throw new Error('Não foi possível obter as negociações do período')\n            });\n    }\n\n}\n"]}